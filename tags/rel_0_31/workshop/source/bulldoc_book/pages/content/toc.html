<cls:keywords data='работа с книгой, оглавление' />
<h3>Черновик</h3>
<p>Прикиньте примерную структуру Книги. Запишите этот набросок в текстовый файл:</p>
<pre>
Обложка
- кавер, автор, версия, год. Сайт, емыл.

Введение
- Цели и задачи
- Что умеет (фичи)

Установка
- где взять
- конфигурация книг
- настройка вебсервера

Наполнение и правка
- Структура
- Текст
- Изображения и файлы
- Подсветка синтаксиса
- Ссылки

Оформление
- Организация тем
- Файлы темы

Экспорт
- экспорт в html
- экспорт в chm
</pre>

<p>Теперь переведем наш набросок в файл, понимаемый программой.</p>

<h3>Файл оглавления формате YAML</h3>
<pre>
introduction.html: Введение
installation.html: Установка
    
content:
  type: chapter
  title: Книга
  level: 1     #уровни оглавления на стр. раздела
  topics:
    bookshelf.html: Книжная полка
    toc.html: Структура
    text:
      type: chapter
      title: Текст
      topics:
        media.html: Изображения и файлы
        highlighting.html: Подсветка синтаксиса
        links.html: Ссылки

layout:
  type: chapter
  title: Оформление
  topics:
    themes_config.html:  Организация тем
    theme_layout.html:  Как устроена тема

export:
  type: chapter
  title: Экспорт
  topics:
    html.html:  Экспорт в html
    chm.html:  Экспорт в chm

appendix:
  type: chapter
  title: Приложения
  topics:
    topic_index.html: {type: index, title: Предметный указатель}
    similar.html:  Аналоги
    roadmap.html:  Планы по развитию
</pre>

<p>Дерево оглавления состоит из узлов. Каждый узел имеет ключ, который будет использован, в качестве имени файла для нахождения текста. В приведенном выше примере текст для страницы "Ссылки" будет храниться в папке <span class='path'>workshop/mybook/pages/content/text/links.html</span> и будет доступен по соответствующему URL. Каждый узел дерева оглавления имеет параметры</p>
<ul>
<li><b>type</b> - Тип узла страница (page), раздел (chapter) или предметный указатель (index, см. раздел <cls:link page='content/topic_index.html' />). Если параметр не указан подразумевается страница&nbsp;(page)</li>
<li><b>title</b> - Название страницы или раздела. <span style='color: red'>Это обязательный параметр</span></li>
<li><b>topics</b> - Только для разделов. Секция содержит страницы раздела и подразделы</li>
<li><b>level</b> - Только для разделов. Задает уровень глубины оглавления на главной странице раздела. Если не задан, то показываются все уровни. На титульной странице используется параметр <b>rootIndexLevel</b> из настроек книжной полки (см. <cls:link page='content/bookshelf.html'/>)</li>
</ul>
<p>Поскольку для страниц нужен только параметр <b>title</b>, то его можно задавать просто строковым значением, без синтаксиса массива:</p>
<pre>
html.html:  Экспорт в html
</pre>
<p>Как и сделано в примере выше.</p>