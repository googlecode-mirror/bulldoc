<cls:keywords data='книжная полка, организация хранилища, файлы и папки' />
<h3>Файлы и папки</h3>
<p>У каждой книги должна быть папка с ее исходниками. Предлагается держать исходники книг в папках вида <span style='white-space: nowrap'>workshop/source/mybook</span>. Однако можно настроить любой другой путь. Если Вы используете  Bulldoc, на сайте, то ваши папки с исходниками должны быть доступны веб-серверу.</p>
<p>
Папка с исходниками книги имеет следующую структуру:
</p>
<pre>
/pages  -- тут лежат тексты страниц и картинки
   introduction.html -- страница
   /chapter1  -- папка подраздела
     topic1.html -- страница подраздела

toc.yml  -- файл структуры
book_data.yml -- Файл данных книги: Название, автор, год выхода и т.д.
</pre>

<p>Для создания новой книги в командной строке запустите:</p>
<code class='commandline'>
bulldoc mybook
</code>

<p>Эта команда создаст 2 папки:<br/>
<span style='white-space: nowrap;color: maroon'>workshop/source/mybook</span><br/>
<span style='white-space: nowrap;color: maroon'>workshop/source/mybook/pages</span><br/>
</p>

<p>И два файла:<br/>
пустой <span style='white-space: nowrap;color: maroon'>/home/bulldoc/workshop/source/mybook/toc.yml</span><br/>
и <span style='white-space: nowrap;color: maroon'>/home/bulldoc/workshop/source/mybook/book_data.yml</span><br/>
</p>

<p>
Также в конец файла <span style='white-space: nowrap;color: maroon'>config/bookshelf.yml</span>, допишется строчка:</p>
<pre>
mybook:
</pre>

<p>Отредактируйте файл <span style='white-space: nowrap;color: maroon'>workshop/source/mybook/book_data.yml</span>, вписав туда название книги, и по желанию изменив другие параметры.</p>

<h3>Настройка книжной полки</h3>
<p>Для того, чтобы программа находила файлы исходников Вашей книги, книгу нужно прописать в настройки книжной полки</p>
<p>Файл настроек находится в <span style='color: maroon; white-space: nowrap'>config/bookshelf.yml</span></p>
<p>Изначально там уже есть одна книга. Вот эта, которую Вы читаете.</p>

<p>Книги на полке &mdash; это совокупность исходников и настроек экспорта. Каждой такой группе назначается ID, который называется ключевым словом и может содержать буквы и цифры. В случае, когда используются настройки по умолчанию, достаточно в файле книжной полки просто упомянуть ключ книги:</p>
<pre>
mybook:
</pre>

<p>Однако иногда требуются дополнительные настройки. Полная секция описания книги выглядит так:</p>

<pre>
...
mybook:
  title: BullDoc CHM
  rootIndexLevel: -1   #Показывать полное оглавление на обложке
  source: mybook_original
  dest:   mybook_special
  theme: blueprint_chm
  buildChm: 1
  language: rus
</pre>

<p><b>mybook</b> это ключевое слово книги на полке. Это слово будет использоваться в url для доступа к сайту книги, и так будут называться файлы для компиляции chm</p>

<p><b>title</b> задает название книги, которое будет отображаться на книжной полке. Если параметр не задан, это значение возьмется из файла конфигурации самой книги. Если же и этого файла пока нет, то будет отображено ключевое слово книги.</p>

<p>Параметр <b>source</b> нам уже знаком &mdash; это папка с исходником книги. <b>dest</b> показывает куда положить результат генерации статики. Если заданы абсолютные пути, то они и будут использоваться, иначе к относительным путям добавятся стандартные папки из workshop</p>
<p><b>rootIndexLevel</b> Регулирует число уровней оглавления на самой первой странице (обложке) книги. Для подразделов можно задать другой уровень. Если у подраздела не задан уровень, используется <b>rootIndexLevel</b>. Значение -1 выключает ограничение и дерево оглавления выводится полностью.</p>

<p>Имеется одна готовая тема <b>blueprint</b>. Вы можете скопировать эту тему под другим названием и отредактировать. Темы хранятся в <span style='color: maroon; white-space: nowrap'>workshop/themes</span>. Значение параметра <b>theme</b> определяет имя папки, в которой тема хранится. Подробнее см. раздел <cls:link page='layout'/>. Тему можно вообще не указывать &mdash; тогда будет использована тема blueprint.</p>

<p>Если установлен параметр <b>buildChm</b>, то при генерации статических файлов будут созданы файла проекта для компиляции chm.</p>

<p><b>language</b> задает язык интерфейса и служебных элементов. Если Ваша книга написана не на языке, установленном в настройках, то следует явно указать язык. В настоящее время поддерживаются только русский-windows1251 (rus) и английский (eng) языки.</p>

<h3>Разделы книжной полки</h3>
<p>Со временем количество книг, с которыми Вы работаете может весьма возрасти. В таком случае для группировки книг можно использовать значения-разделители, т.е. псевдо-записи, в которых имеется параметр <b>separatorTitle</b>:</p>

<pre>
...
general_title:
  separatorTitle: Основной раздел

mybook1:
mybook2:

fiction_title:
  separatorTitle: Художественное

fictionbook1:
fictionbook2:
</pre>